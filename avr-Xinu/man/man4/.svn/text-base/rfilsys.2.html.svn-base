<!-- Creator     : groff version 1.19.2 -->
<!-- CreationDate: Sun Feb  6 21:17:11 2011 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p     { margin-top: 0; margin-bottom: 0; }
       pre   { margin-top: 0; margin-bottom: 0; }
       table { margin-top: 0; margin-bottom: 0; }
</style>
<title></title>
</head>
<body>

<hr>


<p valign="top">RFILSYS(4) avr-Xinu RFILSYS(4)</p>

<p style="margin-top: 1em" valign="top"><b>NAME</b></p>

<p style="margin-left:8%;"><b>rfilsys</b> &mdash; remote
file system pseudo-device driver (types rfm, rf)</p>


<p style="margin-top: 1em" valign="top"><b>SYNOPSIS</b></p>

<p style="margin-left:8%;"><b>#include &lt;rfile.h&gt; <br>
#include &lt;fserver.h&gt;</b></p>


<p style="margin-top: 1em" valign="top"><b>read</b>(<i>int&nbsp;device</i>,
<i>char&nbsp;*buffer</i>, <i>int&nbsp;length</i>);</p>


<p style="margin-top: 1em" valign="top"><b>write</b>(<i>int&nbsp;device</i>,
<i>char&nbsp;*buffer</i>, <i>int&nbsp;length</i>);</p>


<p style="margin-top: 1em" valign="top"><b>open</b>(<i>int&nbsp;device</i>,
<i>char&nbsp;*name</i>, <i>int&nbsp;mode</i>);</p>


<p style="margin-top: 1em" valign="top"><b>close</b>(<i>int&nbsp;device</i>);</p>


<p style="margin-top: 1em" valign="top"><b>control</b>(<i>int&nbsp;device</i>,
<i>int&nbsp;function</i>, <i>char&nbsp;*arg1</i>,
<i>char&nbsp;*arg2</i>);</p>


<p style="margin-top: 1em" valign="top"><b>init</b>(<i>int&nbsp;device</i>);</p>


<p style="margin-top: 1em" valign="top"><b>seek</b>(<i>int&nbsp;device</i>,
<i>long&nbsp;offset</i>);</p>


<p style="margin-top: 1em" valign="top"><b>DESCRIPTION</b></p>

<p style="margin-left:8%;">The <i>rfm</i> and <i>rf</i>
pseudo-device drivers work as a pair to provide access to
remote files using a Xinu remote file server across an
Internet. There is one master remote file pseudo-device
(type <i>rfm</i>) for a given remote server. When users open
the master remote file pseudo-device, they pass it the name
of a specific file and the access mode for that file. The
call to OPEN(2) returns the device descriptor of a remote
file pseudo-device (type <i>rf</i>) connected to the named
file.</p>

<p style="margin-left:8%; margin-top: 1em">Once opened, a
user calls READ(2), WRITE(2), GETC(2), or PUTC(2), to
transfer data between the user program and the remote file;
they call SEEK(2) to position the file pointer. The user
calls CLOSE(2) to disconnect from the file. Finally, users
call CONTROL(2) on the master pseudo-device to test file
access protections, remove files, or change file names.</p>

<p style="margin-left:8%; margin-top: 1em">The standard
Xinu device name for the remote file master pseudo-device is
<i>RFILSYS</i>; the standard Xinu device name for individual
remote file pseudo-devices is <i>RFILE</i>. The operations
on these devices are defined by:</p>

<p style="margin-top: 1em" valign="top">open(device, name,
mode)</p>

<p style="margin-left:22%;">Opens a connection to a remote
file given the file name and access mode, and returns the
device descriptor used to access the file. See ACCESS(2) for
valid file modes.</p>

<p style="margin-top: 1em" valign="top">read(device buffer,
length)</p>

<p style="margin-left:22%;">Transfers up to <i>length</i>
bytes of data from a file to the user&rsquo;s <i>buffer</i>,
and returns the number of bytes found or <i>EOF</i> if no
more data remains in the file.</p>

<p style="margin-top: 1em" valign="top">write(device,
buffer, length)</p>

<p style="margin-left:22%;">Writes <i>length</i> bytes of
data to a file from the user&rsquo;s <i>buffer</i>. File
length extends automatically if needed.</p>

<p style="margin-top: 1em" valign="top">close(device)</p>

<p style="margin-left:22%;">Disconnect from a file, leaving
it on secondary storage.</p>

<p style="margin-top: 1em" valign="top">control(device,
function, arg1, arg2)</p>

<p style="margin-left:22%;">Handles file manipulation other
than data transfer. The possible functions are:</p>

<p style="margin-top: 1em" valign="top">FLACCESS &minus;
test access (<i>arg1</i> is mode string).</p>

<p style="margin-top: 1em" valign="top">FLREMOVE &minus;
remove file named by <i>arg1</i>.</p>

<p style="margin-top: 1em" valign="top">FLRENAME &minus;
rename file named by <i>arg1</i> to <i>arg2</i></p>

<p style="margin-top: 1em" valign="top">FLCLEAR &minus;
clear the remote file datagram port</p>

<p style="margin-top: 1em" valign="top">init(device)</p>

<p style="margin-left:22%;">When called with an <i>rf</i>
device, initializes the pseudo-device data structures at
system startup. Initializing the master pseudo-device has no
effect.</p>


<p style="margin-top: 1em" valign="top">seek(device,offset)</p>

<p style="margin-left:22%;">Positions the file to
<i>offset</i> bytes from the beginning.</p>

<p style="margin-left:8%; margin-top: 1em">XINU V7
February&nbsp;8, 2011 XINU V7</p>
<hr>
</body>
</html>
